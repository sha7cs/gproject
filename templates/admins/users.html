{% extends "admins/base.html" %}
{% block content %}
<main role="main" class="main-content">
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-12">
        <h2 class="h3 mb-3 page-title">المستخدمين</h2>
        <div class="row mb-4 items-align-center">
          <div class="col-md">
            <ul class="nav nav-pills justify-content-start">
              <li class="nav-item">
                <a class="nav-link active bg-transparent pr-2 pl-0 text-primary" href="#">
                  الكل <span class="badge badge-pill bg-primary text-white ml-2">{{ total_count }}</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-muted px-2" href="#">
                  قيد الانتظار <span class="badge badge-pill bg-white border text-muted ml-2">{{ pending_count }}</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-muted px-2" href="#">
                  المقبولين <span class="badge badge-pill bg-white border text-muted ml-2">{{ accepted_count }}</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-muted px-2" href="#">
                  المرفوضين <span class="badge badge-pill bg-white border text-muted ml-2">{{ denied_count }}</span>
                </a>
              </li>
            </ul>
          </div>
          <div class="col-md-auto ml-auto text-right">
            <span class="small bg-white border py-1 px-2 rounded mr-2 d-none d-lg-inline">
              <a href="#" class="text-muted"><i class="fe fe-x mx-1"></i></a>
              <span class="text-muted">Status : <strong>Pending</strong></span>
            </span>
            <span class="small bg-white border py-1 px-2 rounded mr-2 d-none d-lg-inline">
              <a href="#" class="text-muted"><i class="fe fe-x mx-1"></i></a>
              <span class="text-muted">April 14, 2020 - May 13, 2020</span>
            </span>
            <button type="button" class="btn" data-toggle="modal" data-target=".modal-slide"><span class="fe fe-filter fe-16 text-muted"></span></button>
            <button type="button" class="btn"><span class="fe fe-refresh-ccw fe-16 text-muted"></span></button>
          </div>
        </div>
        <!-- Slide Modal -->
        <div class="modal fade modal-slide" tabindex="-1" role="dialog" aria-labelledby="defaultModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="defaultModalLabel">Filters</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <i class="fe fe-x fe-12"></i>
                </button>
              </div>
              <div class="modal-body">
                <div class="p-2">
                  <div class="form-group my-4">
                    <p class="mb-2"><strong>Regions</strong></p>
                    <label for="multi-select2" class="sr-only"></label>
                    <select class="form-control select2-multi" id="multi-select2">
                      <optgroup label="Mountain Time Zone">
                        <option value="AZ">Arizona</option>
                        <option value="CO">Colorado</option>
                        <option value="ID">Idaho</option>
                        <option value="MT">Montana</option>
                        <option value="NE">Nebraska</option>
                        <option value="NM">New Mexico</option>
                        <option value="ND">North Dakota</option>
                        <option value="UT">Utah</option>
                        <option value="WY">Wyoming</option>
                      </optgroup>
                      <optgroup label="Central Time Zone">
                        <option value="AL">Alabama</option>
                        <option value="AR">Arkansas</option>
                        <option value="IL">Illinois</option>
                        <option value="IA">Iowa</option>
                        <option value="KS">Kansas</option>
                        <option value="KY">Kentucky</option>
                        <option value="LA">Louisiana</option>
                        <option value="MN">Minnesota</option>
                        <option value="MS">Mississippi</option>
                        <option value="MO">Missouri</option>
                        <option value="OK">Oklahoma</option>
                        <option value="SD">South Dakota</option>
                        <option value="TX">Texas</option>
                        <option value="TN">Tennessee</option>
                        <option value="WI">Wisconsin</option>
                      </optgroup>
                    </select>
                  </div> <!-- form-group -->
                  <div class="form-group my-4">
                    <p class="mb-2">
                      <strong>Payment</strong>
                    </p>
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="customCheck1">
                      <label class="custom-control-label" for="customCheck1">Paypal</label>
                    </div>
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="customCheck2">
                      <label class="custom-control-label" for="customCheck2">Credit Card</label>
                    </div>
                    <div class="custom-control custom-checkbox">
                      <input type="checkbox" class="custom-control-input" id="customCheck1-1" checked>
                      <label class="custom-control-label" for="customCheck1">Wire Transfer</label>
                    </div>
                  </div> <!-- form-group -->
                  <div class="form-group my-4">
                    <p class="mb-2">
                      <strong>Types</strong>
                    </p>
                    <div class="custom-control custom-radio">
                      <input type="radio" id="customRadio1" name="customRadio" class="custom-control-input">
                      <label class="custom-control-label" for="customRadio1">End users</label>
                    </div>
                    <div class="custom-control custom-radio">
                      <input type="radio" id="customRadio2" name="customRadio" class="custom-control-input" checked>
                      <label class="custom-control-label" for="customRadio2">Whole Sales</label>
                    </div>
                  </div> <!-- form-group -->
                  <div class="form-group my-4">
                    <p class="mb-2">
                      <strong>Completed</strong>
                    </p>
                    <div class="custom-control custom-switch">
                      <input type="checkbox" class="custom-control-input" id="customSwitch1">
                      <label class="custom-control-label" for="customSwitch1">Include</label>
                    </div>
                  </div> <!-- form-group -->
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn mb-2 btn-primary btn-block">Apply</button>
                <button type="button" class="btn mb-2 btn-secondary btn-block">Reset</button>
              </div>
            </div>
          </div>
        </div>
        <table class="table border table-hover bg-white">
          <thead>
            <tr role="row">
              <th>
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input" id="all">
                  <label class="custom-control-label" for="all"></label>
                </div>
              </th>
              <th>ID</th>
              <th>Registration Date</th>  <!-- From Django User Model -->
              <th>Full Name</th>  <!-- First & Last Name from User Model -->
              <th>Username</th>  <!-- From User Model -->
              <th>Email</th>  <!-- From User Model -->
              <th>Cafe Name</th>  <!-- From UserProfile -->
              <th>Uploaded File</th>  <!-- From UserProfile -->
              <th>Firebase Config</th>  <!-- From UserProfile -->
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for profile in profiles %}
            <tr>
              <td class="align-center">
                <div class="custom-control custom-checkbox">
                  <input type="checkbox" class="custom-control-input">
                  <label class="custom-control-label"></label>
                </div>
              </td>
              <td>{{ forloop.counter }}</td>  <!-- Auto-incrementing row number -->
              <td>{{ profile.user.date_joined }}</td>  <!-- Registration Date -->
              <td>{{ profile.user.get_full_name|default:"N/A" }}</td>  <!-- Full Name -->
              <td>{{ profile.user.username }}</td>  <!-- Username -->
              <td>{{ profile.user.email }}</td>  <!-- Email -->
              <td>{{ profile.cafe_name|default:"N/A" }}</td>  <!-- Cafe Name -->
              <td>
                {% if profile.data_file %}
                  <a href="{{ profile.data_file.url }}" target="_blank">View File</a>
                {% else %}
                  No File
                {% endif %}
              </td>
              <td>
                {% if profile.firebase_config %}
                  <a href="{{ profile.firebase_config }}" target="_blank">Firebase Link</a>
                {% else %}
                  No Firebase Config
                {% endif %}
              </td>
              <td>
                <span class="{{ profile.status_class }}">{{ profile.status_text }}</span>
              </td>             
              <td>
                <div class="dropdown">
                  <button class="btn btn-sm dropdown-toggle more-vertical" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="text-muted sr-only">Action</span>
                  </button>
                  <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item" href="#">Edit</a>
                    <a class="dropdown-item" href="#">Remove</a>
                    <a class="dropdown-item" href="#">Assign</a>


                    {% if profile.status == 0 %}  <!-- 0 = Pending -->
                    <a class="dropdown-item text-success" href="{% url 'accept_user' profile.id %}">Accept</a>
                  {% endif %}
                  </div>
                </div>
              </td>
            </tr>
          {% endfor %}
          {% comment %} <td><span class="dot dot-lg bg-warning mr-2"></span></td> {% endcomment %}
          {% comment %} <td><span class="dot dot-lg bg-primary mr-2"></span></td> {% endcomment %}
          </tbody>
        </table>
        <nav aria-label="Table Paging" class="my-3">
          <ul class="pagination justify-content-end mb-0">
            <li class="page-item"><a class="page-link" href="#">Previous</a></li>
            <li class="page-item"><a class="page-link" href="#">1</a></li>
            <li class="page-item active"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item"><a class="page-link" href="#">Next</a></li>
          </ul>
        </nav>
      </div>
    </div> <!-- .row -->
  </div> <!-- .container-fluid -->
  <div class="modal fade modal-notif modal-slide" tabindex="-1" role="dialog" aria-labelledby="defaultModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="defaultModalLabel">Notifications</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="list-group list-group-flush my-n3">
            <div class="list-group-item bg-transparent">
              <div class="row align-items-center">
                <div class="col-auto">
                  <span class="fe fe-box fe-24"></span>
                </div>
                <div class="col">
                  <small><strong>Package has uploaded successfull</strong></small>
                  <div class="my-0 text-muted small">Package is zipped and uploaded</div>
                  <small class="badge badge-pill badge-light text-muted">1m ago</small>
                </div>
              </div>
            </div>
            <div class="list-group-item bg-transparent">
              <div class="row align-items-center">
                <div class="col-auto">
                  <span class="fe fe-download fe-24"></span>
                </div>
                <div class="col">
                  <small><strong>Widgets are updated successfull</strong></small>
                  <div class="my-0 text-muted small">Just create new layout Index, form, table</div>
                  <small class="badge badge-pill badge-light text-muted">2m ago</small>
                </div>
              </div>
            </div>
            <div class="list-group-item bg-transparent">
              <div class="row align-items-center">
                <div class="col-auto">
                  <span class="fe fe-inbox fe-24"></span>
                </div>
                <div class="col">
                  <small><strong>Notifications have been sent</strong></small>
                  <div class="my-0 text-muted small">Fusce dapibus, tellus ac cursus commodo</div>
                  <small class="badge badge-pill badge-light text-muted">30m ago</small>
                </div>
              </div> <!-- / .row -->
            </div>
            <div class="list-group-item bg-transparent">
              <div class="row align-items-center">
                <div class="col-auto">
                  <span class="fe fe-link fe-24"></span>
                </div>
                <div class="col">
                  <small><strong>Link was attached to menu</strong></small>
                  <div class="my-0 text-muted small">New layout has been attached to the menu</div>
                  <small class="badge badge-pill badge-light text-muted">1h ago</small>
                </div>
              </div>
            </div> <!-- / .row -->
          </div> <!-- / .list-group -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary btn-block" data-dismiss="modal">Clear All</button>
        </div>
      </div>
    </div>
  </div>
  <div class="modal fade modal-shortcut modal-slide" tabindex="-1" role="dialog" aria-labelledby="defaultModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="defaultModalLabel">Shortcuts</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body px-5">
          <div class="row align-items-center">
            <div class="col-6 text-center">
              <div class="squircle bg-success justify-content-center">
                <i class="fe fe-cpu fe-32 align-self-center text-white"></i>
              </div>
              <p>Control area</p>
            </div>
            <div class="col-6 text-center">
              <div class="squircle bg-primary justify-content-center">
                <i class="fe fe-activity fe-32 align-self-center text-white"></i>
              </div>
              <p>Activity</p>
            </div>
          </div>
          <div class="row align-items-center">
            <div class="col-6 text-center">
              <div class="squircle bg-primary justify-content-center">
                <i class="fe fe-droplet fe-32 align-self-center text-white"></i>
              </div>
              <p>Droplet</p>
            </div>
            <div class="col-6 text-center">
              <div class="squircle bg-primary justify-content-center">
                <i class="fe fe-upload-cloud fe-32 align-self-center text-white"></i>
              </div>
              <p>Upload</p>
            </div>
          </div>
          <div class="row align-items-center">
            <div class="col-6 text-center">
              <div class="squircle bg-primary justify-content-center">
                <i class="fe fe-users fe-32 align-self-center text-white"></i>
              </div>
              <p>Users</p>
            </div>
            <div class="col-6 text-center">
              <div class="squircle bg-primary justify-content-center">
                <i class="fe fe-settings fe-32 align-self-center text-white"></i>
              </div>
              <p>Settings</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main> <!-- main -->
{% endblock %}