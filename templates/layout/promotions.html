{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% block title%} promotins {% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'chat/chat.css' %}">
<main role="main" class="main-content">
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-12">
        <h1 class="page-title">{% trans 'promotions page' %}</h1>
        <div class="row">

          <!-- first column: Two stacked cards -->
          <div class="col-md-4">
            <div class="row">
              <div class="col-12 mb-3">
                <div class="card-big-shadow">
                  <div class="card card-just-text" data-background="color" data-color="green" data-radius="none">
                    <div class="content">
                      <h6 class="category">Best cards</h6>
                      <h4 class="title">Column 2 Card {{ i|add:1 }}</h4>
                      <p class="description">Information for card {{ i|add:1 }} in column 2.</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12 mb-3">
                <div class="card-big-shadow">
                  <div class="card card-just-text" data-background="color" data-color="pink" data-radius="none">
                    <div class="content">
                      <h6 class="category">Best cards</h6>
                      <h4 class="title">Column 2 Card {{ i|add:1 }}</h4>
                      <p class="description">Information for card {{ i|add:1 }} in column 2.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- second column: Identical to second -->
          <div class="col-md-4">
            <div class="row">
              <div class="col-12 mb-3 ">
                <div class="card-big-shadow">
                  <div class="card card-just-text" data-background="color" data-color="bluesh" data-radius="none">
                    <div class="content">
                      <h6 class="category">Best cards</h6>
                      <h4 class="title">Column 3 Card {{ i|add:1 }}</h4>
                      <p class="description">Information for card {{ i|add:1 }} in column 3.</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12 mb-3">
                <div class="card-big-shadow">
                  <div class="card card-just-text" data-background="color" data-color="gray-brown" data-radius="none">
                    <div class="content">
                      <h6 class="category">Best cards</h6>
                      <h4 class="title">Column 3 Card {{ i|add:1 }}</h4>
                      <p class="description">Information for card {{ i|add:1 }} in column 3.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- third column -->
          <div class="col-md-4">
            <div class="chat-container">
              <!-- Cover Section -->
              <div class="cover-container" id="cover-container">
                <div class="custom-cover">
                  <h2>{% trans 'Welcome to the Chat' %}</h2>
                  <p>{% trans 'Click below to start' %}</p>
                  <img src="{% static 'chat/images/robot.png'%}" alt="Robot" class="robot-image" />
                  <button class="custom-card-button cover" onclick="startChat()">{% trans 'start chat' %}</button>
                </div>
              </div>
          
              <!-- Chat Content -->
              <div class='my-auto flex-column text-center' id="chat-content" style="display: none;">
                <h2 class="text-center" id="categoryTitle">{% trans 'select category' %}</h2>
                <div class="d-flex flex-column align-items-center">
                  <div class="category-buttons mx-4" id="category-buttons">
                    {% for category in categories %}
                    <button class="custom-card-button my-2" onclick="selectCategory('{{ category.id }}')">{{ category.category }}</button>
                    {% endfor %}
                  </div>
                </div>
                <h2 class="text-center" id="subcategoryTitle" style="display: none;">{% trans 'Select a Subcategory' %}</h2>
                  <div class="subcategory-buttons" id="subcategory-buttons" style="display: none;flex-direction: column; gap: 10px;">
                    <!-- Subcategory buttons dynamically added here -->
                  </div>
                <div class="chat-section p-1" id="chat-section">
                  <div class="messages" id="messages">
                    <div class="message bot">{% trans 'botwelcome' %}</div>
                  </div>
                  <div class="input-bar" id="input-bar">
                    <form id="messageForm">
                      {% csrf_token %}
                      <input type="text" id="messageInput" placeholder="{% trans 'typeanswer' %}" />
                      <button class="custom-card-button" type="submit">{% trans 'send' %}</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          

        </div> <!-- .row -->
      </div> <!-- .col-12 -->
    </div> <!-- .row -->
  </div> <!-- .container-fluid -->
</main> <!-- main -->
<script>
  const categoriesjs = JSON.parse('{{ categories_json|escapejs }}');
  const subcategoriesjs = JSON.parse('{{ subcategories_json|escapejs }}');
  const lang = '{{ language|escapejs }}'
  function startChat() {
  document.getElementById('cover-container').style.display = 'none';
  document.getElementById('chat-content').style.display = 'block';
}

</script>

<script src="{% static 'chat/chat.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

{% endblock %}